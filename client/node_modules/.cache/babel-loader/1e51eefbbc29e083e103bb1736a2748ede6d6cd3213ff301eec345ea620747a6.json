{"ast":null,"code":"import _slicedToArray from\"D:/Don't Click Here/2022_2/code_2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import{logoutAction}from'../../store/reducer/changeRoleSlice';import{sidebarMenu,role,PATH,SCREEN_PATH}from'./../../constant/constant';import Login from'../login/Login';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MenuItem=function MenuItem(props){var className=\"no-underline flex items-center p-2 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 hover:cursor-pointer \";var addedClass=props.className;if(addedClass&&addedClass=='selected'){className+=' dark:bg-gray-500';}return/*#__PURE__*/_jsx(\"li\",{className:className,onClick:props.func,children:/*#__PURE__*/_jsx(\"h5\",{className:\"\",children:props.title})});};var Sidebar=function Sidebar(){if(!localStorage.getItem('role')){localStorage.setItem('role',2);localStorage.setItem('menuItemOrder',0);}var showLoadingScreen=useSelector(function(state){return state.showLoadingScreen.value;});var dispatch=useDispatch();var navigate=useNavigate();var rootRole=localStorage.getItem('role');var menuItemOrder=localStorage.getItem('menuItemOrder');var _useState=useState(0),_useState2=_slicedToArray(_useState,2),itemOrder=_useState2[0],setItemOrder=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showLoginDialog=_useState4[0],setShowLoginDialog=_useState4[1];var logoutHandle=function logoutHandle(){dispatch(logoutAction());localStorage.setItem('isLoggedIn',false);localStorage.setItem('role',role.GUEST);localStorage.setItem('email','');navigate(PATH.HOME);};var loginHandle=function loginHandle(){// navigate(PATH.LOGIN);\nsetShowLoginDialog(true);};var closeDialog=function closeDialog(){setShowLoginDialog(false);};useEffect(function(){var pathname=window.location.pathname;SCREEN_PATH.forEach(function(paths){var order=paths.indexOf(pathname);if(order>-1){setItemOrder(paths.indexOf(pathname));// console.log(pathname, paths.indexOf(pathname));\n}});},[window.location.pathname]);return/*#__PURE__*/_jsxs(\"div\",{children:[showLoginDialog&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 h-full w-full bg-black opacity-80 z-50\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsx(Login,{func:closeDialog})})]}),showLoadingScreen&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 h-full w-full bg-black opacity-80 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"absolute z-10 text-white\",children:\"\\u0110ang x\\u1EED l\\xFD...\"})}),/*#__PURE__*/_jsx(\"aside\",{id:\"default-sidebar\",className:\"fixed top-0 left-0 z-40 w-64 h-screen transition-transform -translate-x-full sm:translate-x-0\",\"aria-label\":\"Sidebar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"h-full px-3 py-4 overflow-y-auto bg-gray-50 dark:bg-gray-800 relative\",children:[/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2 text-lg\",children:sidebarMenu[rootRole].map(function(e){return/*#__PURE__*/_jsx(MenuItem,{className:sidebarMenu[rootRole].indexOf(e)==itemOrder?\"selected\":\"\",title:e,func:function func(){var itemOrder=sidebarMenu[rootRole].indexOf(e);navigate(SCREEN_PATH[rootRole][itemOrder]);}});})}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2 text-lg absolute bottom-9\",children:rootRole!=role.GUEST?/*#__PURE__*/_jsx(MenuItem,{title:\"\\u0110\\u0103ng xu\\u1EA5t\",func:logoutHandle}):/*#__PURE__*/_jsx(MenuItem,{title:\"\\u0110\\u0103ng nh\\u1EADp\",func:loginHandle})})]})})]});};export default Sidebar;","map":{"version":3,"names":["useState","useEffect","useNavigate","useSelector","useDispatch","logoutAction","sidebarMenu","role","PATH","SCREEN_PATH","Login","jsx","_jsx","jsxs","_jsxs","MenuItem","props","className","addedClass","onClick","func","children","title","Sidebar","localStorage","getItem","setItem","showLoadingScreen","state","value","dispatch","navigate","rootRole","menuItemOrder","_useState","_useState2","_slicedToArray","itemOrder","setItemOrder","_useState3","_useState4","showLoginDialog","setShowLoginDialog","logoutHandle","GUEST","HOME","loginHandle","closeDialog","pathname","window","location","forEach","paths","order","indexOf","id","map","e"],"sources":["D:/Don't Click Here/2022_2/code_2/client/src/components/sidebar/Sidebar.jsx"],"sourcesContent":["import {useState, useEffect} from 'react'\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { logoutAction } from '../../store/reducer/changeRoleSlice';\r\nimport {sidebarMenu, role, PATH, SCREEN_PATH} from './../../constant/constant';\r\nimport Login from '../login/Login';\r\n\r\nconst MenuItem = (props) =>{\r\n    let className = \"no-underline flex items-center p-2 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 hover:cursor-pointer \";\r\n    let addedClass = props.className;\r\n    if(addedClass && addedClass == 'selected') {\r\n        className += ' dark:bg-gray-500';\r\n    }\r\n    return (\r\n        <li className={className} onClick={props.func}>\r\n            <h5 className=\"\">{props.title}</h5>\r\n        </li>\r\n    )\r\n}\r\n\r\nconst Sidebar = () => {\r\n    if(!localStorage.getItem('role')){\r\n      localStorage.setItem('role', 2);\r\n      localStorage.setItem('menuItemOrder', 0);\r\n    }\r\n    const showLoadingScreen = useSelector((state) => state.showLoadingScreen.value);\r\n    const dispatch = useDispatch();\r\n    const navigate = useNavigate();\r\n    const rootRole = localStorage.getItem('role');\r\n    const menuItemOrder = localStorage.getItem('menuItemOrder');\r\n    const [itemOrder, setItemOrder] = useState(0);\r\n    const [showLoginDialog, setShowLoginDialog] = useState(false);\r\n\r\n    const logoutHandle = ()=>{\r\n        dispatch(logoutAction());\r\n        localStorage.setItem('isLoggedIn', false);\r\n        localStorage.setItem('role', role.GUEST);\r\n        localStorage.setItem('email', '');\r\n        navigate(PATH.HOME);\r\n    }\r\n    \r\n    const loginHandle = ()=>{\r\n        // navigate(PATH.LOGIN);\r\n        setShowLoginDialog(true);\r\n    }\r\n\r\n    const closeDialog = ()=>{\r\n        setShowLoginDialog(false);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        const pathname = window.location.pathname;\r\n        SCREEN_PATH.forEach(paths => {\r\n            const order = paths.indexOf(pathname);\r\n            if(order>-1){\r\n                setItemOrder(paths.indexOf(pathname));\r\n                // console.log(pathname, paths.indexOf(pathname));\r\n            } \r\n        })\r\n    }, [window.location.pathname]);\r\n\r\n    return (\r\n        <div>\r\n            {showLoginDialog && \r\n                <div>\r\n                    <div className=\"absolute inset-0 h-full w-full bg-black opacity-80 z-50\">\r\n                    </div>\r\n                    <div className=\"absolute inset-0 flex items-center justify-center z-50\">\r\n                        <Login func={closeDialog}/>\r\n                    </div>\r\n                </div>\r\n            }\r\n            {showLoadingScreen && \r\n                <div className=\"absolute inset-0 h-full w-full bg-black opacity-80 flex items-center justify-center z-50\">\r\n                    <h1 className='absolute z-10 text-white'>Đang xử lý...</h1>\r\n                </div>\r\n            }\r\n            <aside\r\n                id=\"default-sidebar\"\r\n                className=\"fixed top-0 left-0 z-40 w-64 h-screen transition-transform -translate-x-full sm:translate-x-0\"\r\n                aria-label=\"Sidebar\"\r\n            >\r\n                <div className=\"h-full px-3 py-4 overflow-y-auto bg-gray-50 dark:bg-gray-800 relative\">\r\n                    <ul className=\"space-y-2 text-lg\"> \r\n                        {\r\n                            sidebarMenu[rootRole].map((e)=>\r\n                                <MenuItem \r\n                                className={sidebarMenu[rootRole].indexOf(e) == itemOrder ? \"selected\" : \"\"} \r\n                                title={e} func={()=>{\r\n                                    const itemOrder = sidebarMenu[rootRole].indexOf(e);\r\n                                    navigate(SCREEN_PATH[rootRole][itemOrder]);\r\n                                }\r\n                            }/>)\r\n                        }\r\n                    </ul>\r\n                    <ul className=\"space-y-2 text-lg absolute bottom-9\">\r\n                        {\r\n                            rootRole!=role.GUEST ? <MenuItem title=\"Đăng xuất\" func={logoutHandle}/> : <MenuItem title=\"Đăng nhập\" func={loginHandle}/>\r\n                        }\r\n                    </ul>\r\n                </div>\r\n            </aside>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sidebar"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}