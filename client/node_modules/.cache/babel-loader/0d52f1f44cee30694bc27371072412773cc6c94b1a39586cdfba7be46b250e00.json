{"ast":null,"code":"import _regeneratorRuntime from\"D:/Don't Click Here/2022_2/code_2/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Don't Click Here/2022_2/code_2/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Don't Click Here/2022_2/code_2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{PATH}from'../../../constant/constant';import MainFrame from'../../mainframe/MainFrame';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faTrash}from'@fortawesome/free-solid-svg-icons';import{getAllEmail,deleteUser}from'../../../service/userService';import AddAccForm from'./AddAccForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AccManage(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allEmail=_useState2[0],setAllEmail=_useState2[1];// localStorage.setItem('allEmail', JSON.stringify([]));\n// const listEmail = JSON.parse(localStorage.getItem('allEmail'));\nvar _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),inputSearch=_useState4[0],setInputSearch=_useState4[1];var _useState5=useState(allEmail),_useState6=_slicedToArray(_useState5,2),displayEmailList=_useState6[0],setDisplayEmailList=_useState6[1];// console.log(displayEmailList);\nvar filterEmail=function filterEmail(event){console.log(displayEmailList);var inputValue=event.target.value;setInputSearch(event.target.value);var filterList=allEmail.filter(function(e){return e.email.includes(inputValue);});setDisplayEmailList(filterList);};var handleDeleteEmail=function handleDeleteEmail(order){var selectedEmail=allEmail.find(function(e){return e.order==order;});var confirmCheck=window.confirm(\"Xóa email \"+selectedEmail.email+\" ?\");// console.log(order);\nif(confirmCheck){var data=deleteUser(selectedEmail.email);if(data.errorCode==1){alert(\" Tài khoản không còn tồn tại trong hệ thống.\\nCó quản trị viên khác đã xóa tài khoản đó.\");}else{navigate(PATH.HOME);}}};useEffect(function(){if(localStorage.getItem('role')!=0){// localStorage.setItem('role', 2);\nnavigate(PATH.HOME);}// localStorage.setItem('menuItemOrder', 0);\nvar fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var allEmailService;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getAllEmail(localStorage.getItem('email'));case 3:allEmailService=_context.sent;setAllEmail(allEmailService);setDisplayEmailList(allEmailService);// localStorage.setItem('allEmail', JSON.stringify(allEmail));\n_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);return/*#__PURE__*/_jsxs(MainFrame,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Qu\\u1EA3n l\\xFD t\\xE0i kho\\u1EA3n\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-4 mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputSearch,className:\"border border-gray-500 rounded-md py-2 px-4 focus:outline-none focus:ring-2 focus:ring-gray-500 w-full h-14\",placeholder:\"T\\xECm ki\\u1EBFm\",onChange:filterEmail})})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(AddAccForm,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"shadow-md sm:rounded-lg mt-10\",children:\"Danh s\\xE1ch t\\xE0i kho\\u1EA3n\"}),/*#__PURE__*/_jsx(\"div\",{className:\"shadow-md sm:rounded-lg mt-4\",children:/*#__PURE__*/_jsx(\"table\",{className:\"w-full text-lg text-left\",children:/*#__PURE__*/_jsx(\"tbody\",{children:displayEmailList.map(function(e){return/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-white border-b dark:bg-gray-900 dark:border-gray-700\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 \",children:e.email}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDeleteEmail(e.order);},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTrash})})})]});})})})})]})]});}export default AccManage;","map":{"version":3,"names":["useState","useEffect","useNavigate","PATH","MainFrame","FontAwesomeIcon","faTrash","getAllEmail","deleteUser","AddAccForm","jsx","_jsx","jsxs","_jsxs","AccManage","navigate","_useState","_useState2","_slicedToArray","allEmail","setAllEmail","_useState3","_useState4","inputSearch","setInputSearch","_useState5","_useState6","displayEmailList","setDisplayEmailList","filterEmail","event","console","log","inputValue","target","value","filterList","filter","e","email","includes","handleDeleteEmail","order","selectedEmail","find","confirmCheck","window","confirm","data","errorCode","alert","HOME","localStorage","getItem","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","allEmailService","wrap","_callee$","_context","prev","next","sent","t0","stop","apply","arguments","children","className","type","placeholder","onChange","map","onClick","icon"],"sources":["D:/Don't Click Here/2022_2/code_2/client/src/components/subscreen/admin/AccManage.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { PATH } from '../../../constant/constant';\r\nimport MainFrame from '../../mainframe/MainFrame';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTrash } from '@fortawesome/free-solid-svg-icons';\r\nimport { getAllEmail, deleteUser } from '../../../service/userService';\r\nimport AddAccForm from './AddAccForm';\r\n\r\nfunction AccManage() {\r\n    const navigate = useNavigate();\r\n    const [allEmail, setAllEmail] = useState([]);\r\n  // localStorage.setItem('allEmail', JSON.stringify([]));\r\n  // const listEmail = JSON.parse(localStorage.getItem('allEmail'));\r\n  const [inputSearch, setInputSearch] = useState('');\r\n  const [displayEmailList, setDisplayEmailList] = useState(allEmail);\r\n\r\n  // console.log(displayEmailList);\r\n\r\n  const filterEmail = (event) => {\r\n    console.log(displayEmailList);\r\n    const inputValue = event.target.value;\r\n    setInputSearch(event.target.value);\r\n    const filterList = allEmail.filter(e=>e.email.includes(inputValue));\r\n    setDisplayEmailList(filterList);\r\n  }\r\n\r\n  const handleDeleteEmail = (order)=>{\r\n    const selectedEmail = allEmail.find(e=>e.order == order);\r\n    const confirmCheck = window.confirm(\"Xóa email \" + selectedEmail.email + \" ?\");\r\n    // console.log(order);\r\n    if(confirmCheck){\r\n      const data = deleteUser(selectedEmail.email);\r\n      if(data.errorCode == 1){\r\n        alert(\" Tài khoản không còn tồn tại trong hệ thống.\\nCó quản trị viên khác đã xóa tài khoản đó.\")\r\n      } else {\r\n        navigate(PATH.HOME);\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(localStorage.getItem('role') != 0){\r\n      // localStorage.setItem('role', 2);\r\n      navigate(PATH.HOME);\r\n    }\r\n    // localStorage.setItem('menuItemOrder', 0);\r\n    const fetchData = async () => {\r\n      try {\r\n        const allEmailService = await getAllEmail(localStorage.getItem('email'));\r\n        setAllEmail(allEmailService);\r\n        setDisplayEmailList(allEmailService)\r\n        // localStorage.setItem('allEmail', JSON.stringify(allEmail));\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n  \r\n    fetchData();\r\n  }, []);\r\n  \r\n\r\n  return (\r\n    <MainFrame>\r\n      <h1>Quản lý tài khoản</h1>\r\n      <div className=\"grid grid-cols-1 gap-4 mt-5\">\r\n        <div className=\"col-span-1\">\r\n          <input\r\n            type=\"text\"\r\n            value={inputSearch}\r\n            className=\"border border-gray-500 rounded-md py-2 px-4 focus:outline-none focus:ring-2 focus:ring-gray-500 w-full h-14\"\r\n            placeholder=\"Tìm kiếm\"\r\n            onChange={filterEmail}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className=\"mt-4\">\r\n        <AddAccForm/>\r\n      </div>\r\n      <div className=\"\">\r\n        <h3 className=\"shadow-md sm:rounded-lg mt-10\">Danh sách tài khoản</h3>\r\n        <div className=\"shadow-md sm:rounded-lg mt-4\">\r\n          <table className=\"w-full text-lg text-left\">\r\n            <tbody>\r\n              {displayEmailList.map(e=>\r\n                <tr className=\"bg-white border-b dark:bg-gray-900 dark:border-gray-700\">\r\n                  <th className=\"px-6 py-4 \">\r\n                    {e.email}\r\n                  </th>\r\n                  <td className=\"px-6 py-4\">\r\n                    <button onClick={()=>handleDeleteEmail(e.order)}>\r\n                      <FontAwesomeIcon icon={faTrash} />\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n      </MainFrame>\r\n      \r\n  )\r\n}\r\n\r\nexport default AccManage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}