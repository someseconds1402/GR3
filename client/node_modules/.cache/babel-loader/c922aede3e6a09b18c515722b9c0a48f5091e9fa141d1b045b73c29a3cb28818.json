{"ast":null,"code":"var _jsxFileName = \"D:\\\\Don't Click Here\\\\2022_2\\\\code_2\\\\client\\\\src\\\\components\\\\subscreen\\\\expert\\\\importfile\\\\DownloadDataFrame.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { getProvinceDataAPI, getPandemicDataAPI, getSupplyTypeDataAPI, getMedicalSupplyDataAPI } from '../../../../service/userService';\n// Excel\nimport * as XLSX from 'xlsx';\nimport { saveAs } from 'file-saver';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DownloadDataFrame = () => {\n  _s();\n  const [showTip, setShowTip] = useState(false);\n  const downloadFile = (data, filename) => {\n    const currentTime = new Date().getTime();\n    const fileName = `${currentTime}_${filename}.xlsx`;\n    // Tạo workbook mới\n    const workbook = XLSX.utils.book_new();\n\n    // Convert data to worksheet format\n    // console.log(data);\n    const worksheet = XLSX.utils.json_to_sheet(data);\n    // console.log(fileName, workbook, worksheet);\n    // Append worksheet to workbook\n    XLSX.utils.book_append_sheet(workbook, worksheet, 'Data');\n    // Write workbook to Excel file\n    const excelBuffer = XLSX.write(workbook, {\n      bookType: 'xlsx',\n      type: 'buffer'\n    });\n    // Create a Blob from the buffer\n    const blob = new Blob([excelBuffer], {\n      type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n    });\n    // Download the file\n    saveAs(blob, fileName);\n  };\n  const getProvinceData = async () => {\n    const provinceData = await getProvinceDataAPI();\n    // console.log(provinceData);\n    downloadFile(provinceData.map(e => {\n      return {\n        province_id: e.province_id,\n        province_name: e.province_name\n      };\n    }), 'Province');\n  };\n  const getPandemicData = async () => {\n    const pandemicData = await getPandemicDataAPI();\n    // console.log(pandemicData);\n    downloadFile(pandemicData.map(e => {\n      return {\n        pandemic_id: e.pandemic_id,\n        pandemic_name: e.pandemic_name\n      };\n    }), 'Pandemic');\n  };\n  const getMedicalSupplyData = async () => {\n    const medicalSupplyData = await getMedicalSupplyDataAPI();\n    console.log(medicalSupplyData);\n  };\n  const getSupplyTypeData = async () => {\n    const supplyTypeData = await getSupplyTypeDataAPI();\n    console.log(supplyTypeData);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-4\",\n    children: showTip ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" text-green-900 \",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cursor-pointer underline\",\n        onClick: getProvinceData,\n        children: \"T\\u1EC9nh th\\xE0nh ph\\u1ED1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cursor-pointer underline\",\n        onClick: getPandemicData,\n        children: \"Lo\\u1EA1i d\\u1ECBch b\\u1EC7nh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cursor-pointer underline\",\n        onClick: getSupplyTypeData,\n        children: \"Ph\\xE2n lo\\u1EA1i VTYT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cursor-pointer underline\",\n        onClick: getMedicalSupplyData,\n        children: \"S\\u1EA3n ph\\u1EA9m VTYT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cursor-pointer text-red-900 underline\",\n        onClick: () => {\n          setShowTip(false);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\u1EA8n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 106\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-blue-500 underline cursor-pointer\",\n      onClick: () => {\n        setShowTip(true);\n      },\n      children: \"Download c\\xE1c file d\\u1EEF li\\u1EC7u\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 22\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n};\n_s(DownloadDataFrame, \"GE/Lh4Oj06EsDiofemhTKkFYmWI=\");\n_c = DownloadDataFrame;\nexport default DownloadDataFrame;\nvar _c;\n$RefreshReg$(_c, \"DownloadDataFrame\");","map":{"version":3,"names":["React","useState","getProvinceDataAPI","getPandemicDataAPI","getSupplyTypeDataAPI","getMedicalSupplyDataAPI","XLSX","saveAs","jsxDEV","_jsxDEV","DownloadDataFrame","_s","showTip","setShowTip","downloadFile","data","filename","currentTime","Date","getTime","fileName","workbook","utils","book_new","worksheet","json_to_sheet","book_append_sheet","excelBuffer","write","bookType","type","blob","Blob","getProvinceData","provinceData","map","e","province_id","province_name","getPandemicData","pandemicData","pandemic_id","pandemic_name","getMedicalSupplyData","medicalSupplyData","console","log","getSupplyTypeData","supplyTypeData","className","children","onClick","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/Don't Click Here/2022_2/code_2/client/src/components/subscreen/expert/importfile/DownloadDataFrame.jsx"],"sourcesContent":["import React, {useState} from 'react';\r\nimport { getProvinceDataAPI, getPandemicDataAPI, getSupplyTypeDataAPI, getMedicalSupplyDataAPI } from '../../../../service/userService';\r\n// Excel\r\nimport * as XLSX from 'xlsx';\r\nimport { saveAs } from 'file-saver';\r\n\r\nconst DownloadDataFrame = () => {\r\n    const [showTip, setShowTip] = useState(false);\r\n\r\n    const downloadFile = (data, filename) => {\r\n        const currentTime = new Date().getTime();\r\n        const fileName = `${currentTime}_${filename}.xlsx`;\r\n        // Tạo workbook mới\r\n        const workbook = XLSX.utils.book_new();\r\n    \r\n        // Convert data to worksheet format\r\n        // console.log(data);\r\n        const worksheet = XLSX.utils.json_to_sheet(data);\r\n        // console.log(fileName, workbook, worksheet);\r\n        // Append worksheet to workbook\r\n        XLSX.utils.book_append_sheet(workbook, worksheet, 'Data');\r\n        // Write workbook to Excel file\r\n        const excelBuffer = XLSX.write(workbook, { bookType: 'xlsx', type: 'buffer' });\r\n        // Create a Blob from the buffer\r\n        const blob = new Blob([excelBuffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\r\n        // Download the file\r\n        saveAs(blob, fileName);\r\n      };\r\n\r\n    const getProvinceData = async () => {\r\n        const provinceData = await getProvinceDataAPI();\r\n        // console.log(provinceData);\r\n        downloadFile(provinceData.map(e=>{\r\n            return {\r\n                province_id: e.province_id,\r\n                province_name: e.province_name,\r\n            }\r\n        }), 'Province')\r\n    }\r\n\r\n    const getPandemicData = async () => {\r\n        const pandemicData = await getPandemicDataAPI();\r\n        // console.log(pandemicData);\r\n        downloadFile(pandemicData.map(e=>{\r\n            return {\r\n                pandemic_id: e.pandemic_id,\r\n                pandemic_name: e.pandemic_name,\r\n            }\r\n        }), 'Pandemic');\r\n    }\r\n\r\n    const getMedicalSupplyData = async () => {\r\n        const medicalSupplyData = await getMedicalSupplyDataAPI();\r\n        console.log(medicalSupplyData);\r\n    }\r\n\r\n    const getSupplyTypeData = async () => {\r\n        const supplyTypeData = await getSupplyTypeDataAPI();\r\n        console.log(supplyTypeData);\r\n    }\r\n\r\n    return (\r\n        <div className=\"mt-4\">\r\n            {showTip ? \r\n            <div className=\" text-green-900 \">\r\n                <div className=\"cursor-pointer underline\" onClick={getProvinceData}>Tỉnh thành phố</div>\r\n                <div className=\"cursor-pointer underline\" onClick={getPandemicData}>Loại dịch bệnh</div>\r\n                <div className=\"cursor-pointer underline\" onClick={getSupplyTypeData}>Phân loại VTYT</div>\r\n                <div className=\"cursor-pointer underline\" onClick={getMedicalSupplyData}>Sản phẩm VTYT</div>\r\n                <div className=\"cursor-pointer text-red-900 underline\" onClick={()=>{setShowTip(false)}}><strong>Ẩn</strong></div>\r\n            </div> : <div className=\"text-blue-500 underline cursor-pointer\" onClick={()=>{setShowTip(true)}}>Download các file dữ liệu</div>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DownloadDataFrame;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}